{"ast":null,"code":"var _jsxFileName = \"G:\\\\FER202\\\\ASM\\\\Fishinghub_NJ\\\\src\\\\pages\\\\Event\\\\EventRegisterForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Row, Col, Card, Button, Form, InputGroup, Alert } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../Auth/AuthContext\"; // Thêm dòng này\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function EventDetail() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate(); // Thêm dòng này\n  const {\n    user\n  } = useAuth(); // Thêm dòng này\n  const [event, setEvent] = useState(null);\n  const [terms, setTerms] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n  const [form, setForm] = useState({\n    name: \"\",\n    phone: \"\",\n    email: \"\",\n    age: \"\",\n    gender: \"Nam\"\n  });\n  const [isRegistered, setIsRegistered] = useState(false);\n  useEffect(() => {\n    fetch(`http://localhost:9999/events/${id}`).then(res => res.json()).then(data => setEvent(data));\n    if (user) {\n      fetch(`http://localhost:9999/registrations?eventId=${id}&userId=${user.id}`).then(res => res.json()).then(data => {\n        if (data.length > 0) {\n          setIsRegistered(true);\n          // Set lại form bằng thông tin đã đăng ký\n          setForm({\n            name: data[0].name || \"\",\n            phone: data[0].phone || \"\",\n            email: data[0].email || \"\",\n            age: data[0].age || \"\",\n            gender: data[0].gender || \"Nam\"\n          });\n        } else {\n          setIsRegistered(false);\n          // Nếu chưa đăng ký thì có thể set form về mặc định hoặc giữ nguyên\n        }\n      });\n    }\n  }, [id, user]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setForm(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!user) {\n      navigate(\"/login\");\n      return;\n    }\n    if (!terms) {\n      setShowAlert(true);\n      return;\n    }\n    // Lưu thông tin đăng ký vào database, có userId\n    const registration = {\n      eventId: event.id,\n      userId: user.id,\n      ...form,\n      registeredAt: new Date().toISOString()\n    };\n    await fetch(\"http://localhost:9999/registrations\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(registration)\n    });\n\n    // Tăng số người tham gia lên 1\n    await fetch(`http://localhost:9999/events/${event.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        participants: Number(event.participants) + 1\n      })\n    });\n\n    // Fetch lại event để cập nhật số lượng mới\n    await fetch(`http://localhost:9999/events/${event.id}`).then(res => res.json()).then(data => setEvent(data));\n    alert(\"Đăng ký thành công! \");\n  };\n  const handleCancel = async () => {\n    // Lấy registration của user với event này\n    const res = await fetch(`http://localhost:9999/registrations?eventId=${event.id}&userId=${user.id}`);\n    const data = await res.json();\n    if (data.length > 0) {\n      // Xóa đăng ký\n      await fetch(`http://localhost:9999/registrations/${data[0].id}`, {\n        method: \"DELETE\"\n      });\n      // Giảm số người tham gia\n      await fetch(`http://localhost:9999/events/${event.id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          participants: Number(event.participants) - 1\n        })\n      });\n      // Cập nhật lại event và trạng thái\n      await fetch(`http://localhost:9999/events/${event.id}`).then(res => res.json()).then(data => setEvent(data));\n      setIsRegistered(false);\n      alert(\"Đã hủy đăng ký!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4 main-content\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        lg: 5,\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: event && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n              variant: \"top\",\n              src: event.image,\n              style: {\n                height: 250,\n                objectFit: \"cover\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: event.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Th\\u1EDDi gian:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 41\n                }, this), \" \", new Date(event.startDate).toLocaleDateString(\"vi-VN\"), \" - \", new Date(event.endDate).toLocaleDateString(\"vi-VN\"), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 170\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"\\u0110\\u1ECBa \\u0111i\\u1EC3m:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 41\n                }, this), \" \", event.location, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 74\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"S\\u1ED1 l\\u01B0\\u1EE3ng:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 41\n                }, this), \" \", event.participants, \"/\", event.maxParticipants, \" ng\\u01B0\\u1EDDi \\u0111\\xE3 \\u0111\\u0103ng k\\xFD\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 119\n                }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Tr\\u1EA1ng th\\xE1i:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 41\n                }, this), \" \", event.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 74\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"M\\xF4 t\\u1EA3 s\\u1EF1 ki\\u1EC7n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-muted\",\n                style: {\n                  fontSize: 15\n                },\n                children: event.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Gi\\u1EA3i th\\u01B0\\u1EDFng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 37\n              }, this), event.hasPrize && event.prizeDetail ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2\",\n                children: event.prizeDetail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 41\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-2 text-muted\",\n                children: \"Kh\\xF4ng c\\xF3 gi\\u1EA3i th\\u01B0\\u1EDFng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Li\\xEAn h\\u1EC7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Tr\\u1EA7n V\\u0103n H\\xF9ng (Ban t\\u1ED5 ch\\u1EE9c) - 0912 345 678\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 84\n                }, this), \"giaidau@caucahanoi.vn\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        lg: 7,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-4\",\n              children: \"\\u0110\\u0103ng k\\xFD tham gia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this), showAlert && /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"danger\",\n              onClose: () => setShowAlert(false),\n              dismissible: true,\n              children: \"Vui l\\xF2ng \\u0111\\u1ED3ng \\xFD v\\u1EDBi \\u0111i\\u1EC1u kho\\u1EA3n v\\xE0 \\u0111i\\u1EC1u ki\\u1EC7n \\u0111\\u1EC3 ti\\u1EBFp t\\u1EE5c.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-3\",\n                children: \"Th\\xF4ng tin c\\xE1 nh\\xE2n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: [\"H\\u1ECD v\\xE0 t\\xEAn \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-danger\",\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 67\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      required: true,\n                      type: \"text\",\n                      name: \"name\",\n                      value: form.name,\n                      onChange: handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: [\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-danger\",\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 71\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      required: true,\n                      type: \"tel\",\n                      name: \"phone\",\n                      value: form.phone,\n                      onChange: handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 12,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: [\"Email \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-danger\",\n                        children: \"*\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 192,\n                        columnNumber: 63\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 192,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      required: true,\n                      type: \"email\",\n                      name: \"email\",\n                      value: form.email,\n                      onChange: handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Tu\\u1ED5i\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"number\",\n                      min: 1,\n                      name: \"age\",\n                      value: form.age,\n                      onChange: handleChange\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Gi\\u1EDBi t\\xEDnh\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(Form.Check, {\n                        inline: true,\n                        label: \"Nam\",\n                        name: \"gender\",\n                        type: \"radio\",\n                        value: \"Nam\",\n                        checked: form.gender === \"Nam\",\n                        onChange: handleChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 218,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                        inline: true,\n                        label: \"N\\u1EEF\",\n                        name: \"gender\",\n                        type: \"radio\",\n                        value: \"N\\u1EEF\",\n                        checked: form.gender === \"Nữ\",\n                        onChange: handleChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 227,\n                        columnNumber: 49\n                      }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n                        inline: true,\n                        label: \"Kh\\xE1c\",\n                        name: \"gender\",\n                        type: \"radio\",\n                        value: \"Kh\\xE1c\",\n                        checked: form.gender === \"Khác\",\n                        onChange: handleChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 49\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"my-3\",\n                children: /*#__PURE__*/_jsxDEV(Form.Check, {\n                  type: \"checkbox\",\n                  label: /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [\"T\\xF4i \\u0111\\xE3 \\u0111\\u1ECDc v\\xE0 \\u0111\\u1ED3ng \\xFD v\\u1EDBi \", /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"#\",\n                      children: \"\\u0110i\\u1EC1u kho\\u1EA3n v\\xE0 \\u0110i\\u1EC1u ki\\u1EC7n\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 75\n                    }, this), \" c\\u1EE7a s\\u1EF1 ki\\u1EC7n.\"]\n                  }, void 0, true),\n                  checked: terms,\n                  onChange: e => setTerms(e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-end\",\n                children: isRegistered ? /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"danger\",\n                  size: \"lg\",\n                  onClick: handleCancel,\n                  children: \"H\\u1EE7y \\u0111\\u0103ng k\\xFD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"primary\",\n                  size: \"lg\",\n                  children: \"X\\xE1c nh\\u1EADn \\u0111\\u0103ng k\\xFD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this);\n}\n_s(EventDetail, \"FhR7ZQ7rzN906+Vzsd5+ZrsvGq4=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = EventDetail;\nvar _c;\n$RefreshReg$(_c, \"EventDetail\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Button","Form","InputGroup","Alert","useParams","useNavigate","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","EventDetail","_s","id","navigate","user","event","setEvent","terms","setTerms","showAlert","setShowAlert","form","setForm","name","phone","email","age","gender","isRegistered","setIsRegistered","fetch","then","res","json","data","length","handleChange","e","value","target","prev","handleSubmit","preventDefault","registration","eventId","userId","registeredAt","Date","toISOString","method","headers","body","JSON","stringify","participants","Number","alert","handleCancel","className","children","lg","Img","variant","src","image","style","height","objectFit","fileName","_jsxFileName","lineNumber","columnNumber","Body","Title","title","Text","startDate","toLocaleDateString","endDate","location","maxParticipants","status","fontSize","description","hasPrize","prizeDetail","onClose","dismissible","onSubmit","md","Group","Label","Control","required","type","onChange","min","Check","inline","label","checked","href","size","onClick","_c","$RefreshReg$"],"sources":["G:/FER202/ASM/Fishinghub_NJ/src/pages/Event/EventRegisterForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    Container, Row, Col, Card, Button, Form, InputGroup, Alert,\r\n} from \"react-bootstrap\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../Auth/AuthContext\"; // Thêm dòng này\r\n\r\nexport default function EventDetail() {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate(); // Thêm dòng này\r\n    const { user } = useAuth(); // Thêm dòng này\r\n    const [event, setEvent] = useState(null);\r\n    const [terms, setTerms] = useState(false);\r\n    const [showAlert, setShowAlert] = useState(false);\r\n    const [form, setForm] = useState({\r\n        name: \"\",\r\n        phone: \"\",\r\n        email: \"\",\r\n        age: \"\",\r\n        gender: \"Nam\"\r\n    });\r\n    const [isRegistered, setIsRegistered] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch(`http://localhost:9999/events/${id}`)\r\n            .then(res => res.json())\r\n            .then(data => setEvent(data));\r\n\r\n        if (user) {\r\n            fetch(`http://localhost:9999/registrations?eventId=${id}&userId=${user.id}`)\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.length > 0) {\r\n                        setIsRegistered(true);\r\n                        // Set lại form bằng thông tin đã đăng ký\r\n                        setForm({\r\n                            name: data[0].name || \"\",\r\n                            phone: data[0].phone || \"\",\r\n                            email: data[0].email || \"\",\r\n                            age: data[0].age || \"\",\r\n                            gender: data[0].gender || \"Nam\"\r\n                        });\r\n                    } else {\r\n                        setIsRegistered(false);\r\n                        // Nếu chưa đăng ký thì có thể set form về mặc định hoặc giữ nguyên\r\n                    }\r\n                });\r\n        }\r\n    }, [id, user]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setForm(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!user) {\r\n            navigate(\"/login\");\r\n            return;\r\n        }\r\n        if (!terms) {\r\n            setShowAlert(true);\r\n            return;\r\n        }\r\n        // Lưu thông tin đăng ký vào database, có userId\r\n        const registration = {\r\n            eventId: event.id,\r\n            userId: user.id,\r\n            ...form,\r\n            registeredAt: new Date().toISOString()\r\n        };\r\n        await fetch(\"http://localhost:9999/registrations\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(registration)\r\n        });\r\n\r\n        // Tăng số người tham gia lên 1\r\n        await fetch(`http://localhost:9999/events/${event.id}`, {\r\n            method: \"PATCH\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ participants: Number(event.participants) + 1 })\r\n        });\r\n\r\n        // Fetch lại event để cập nhật số lượng mới\r\n        await fetch(`http://localhost:9999/events/${event.id}`)\r\n            .then(res => res.json())\r\n            .then(data => setEvent(data));\r\n\r\n        alert(\"Đăng ký thành công! \");\r\n\r\n    };\r\n\r\n    const handleCancel = async () => {\r\n        // Lấy registration của user với event này\r\n        const res = await fetch(`http://localhost:9999/registrations?eventId=${event.id}&userId=${user.id}`);\r\n        const data = await res.json();\r\n        if (data.length > 0) {\r\n            // Xóa đăng ký\r\n            await fetch(`http://localhost:9999/registrations/${data[0].id}`, { method: \"DELETE\" });\r\n            // Giảm số người tham gia\r\n            await fetch(`http://localhost:9999/events/${event.id}`, {\r\n                method: \"PATCH\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({ participants: Number(event.participants) - 1 })\r\n            });\r\n            // Cập nhật lại event và trạng thái\r\n            await fetch(`http://localhost:9999/events/${event.id}`)\r\n                .then(res => res.json())\r\n                .then(data => setEvent(data));\r\n            setIsRegistered(false);\r\n            alert(\"Đã hủy đăng ký!\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container className=\"py-4 main-content\">\r\n            <Row>\r\n                <Col lg={5} className=\"mb-4\">\r\n                    <Card>\r\n                        {event && (\r\n                            <>\r\n                                <Card.Img variant=\"top\" src={event.image} style={{ height: 250, objectFit: \"cover\" }} />\r\n                                <Card.Body>\r\n                                    <Card.Title>{event.title}</Card.Title>\r\n                                    <Card.Text>\r\n                                        <b>Thời gian:</b> {new Date(event.startDate).toLocaleDateString(\"vi-VN\")} - {new Date(event.endDate).toLocaleDateString(\"vi-VN\")}<br />\r\n                                        <b>Địa điểm:</b> {event.location}<br />\r\n                                        <b>Số lượng:</b> {event.participants}/{event.maxParticipants} người đã đăng ký<br />\r\n                                        <b>Trạng thái:</b> {event.status}<br />\r\n                                    </Card.Text>\r\n                                    <hr />\r\n                                    <b>Mô tả sự kiện</b>\r\n                                    <div className=\"text-muted\" style={{ fontSize: 15 }}>\r\n                                        {event.description}\r\n                                    </div>\r\n                                    <hr />\r\n                                    <b>Giải thưởng</b>\r\n                                    {event.hasPrize && event.prizeDetail ? (\r\n                                        <div className=\"mb-2\">{event.prizeDetail}</div>\r\n                                    ) : (\r\n                                        <div className=\"mb-2 text-muted\">Không có giải thưởng</div>\r\n                                    )}\r\n                                    <hr />\r\n                                    <b>Liên hệ</b>\r\n                                    <div>Trần Văn Hùng (Ban tổ chức) - 0912 345 678<br />giaidau@caucahanoi.vn</div>\r\n                                </Card.Body>\r\n                            </>\r\n                        )}\r\n                    </Card>\r\n                </Col>\r\n                <Col lg={7}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <h2 className=\"mb-4\">Đăng ký tham gia</h2>\r\n                            {showAlert && (\r\n                                <Alert variant=\"danger\" onClose={() => setShowAlert(false)} dismissible>\r\n                                    Vui lòng đồng ý với điều khoản và điều kiện để tiếp tục.\r\n                                </Alert>\r\n                            )}\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <h5 className=\"mb-3\">Thông tin cá nhân</h5>\r\n                                <Row>\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Họ và tên <span className=\"text-danger\">*</span></Form.Label>\r\n                                            <Form.Control\r\n                                                required\r\n                                                type=\"text\"\r\n                                                name=\"name\"\r\n                                                value={form.name}\r\n                                                onChange={handleChange}\r\n                                            />\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Số điện thoại <span className=\"text-danger\">*</span></Form.Label>\r\n                                            <Form.Control\r\n                                                required\r\n                                                type=\"tel\"\r\n                                                name=\"phone\"\r\n                                                value={form.phone}\r\n                                                onChange={handleChange}\r\n                                            />\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                    <Col md={12}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Email <span className=\"text-danger\">*</span></Form.Label>\r\n                                            <Form.Control\r\n                                                required\r\n                                                type=\"email\"\r\n                                                name=\"email\"\r\n                                                value={form.email}\r\n                                                onChange={handleChange}\r\n                                            />\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Tuổi</Form.Label>\r\n                                            <Form.Control\r\n                                                type=\"number\"\r\n                                                min={1}\r\n                                                name=\"age\"\r\n                                                value={form.age}\r\n                                                onChange={handleChange}\r\n                                            />\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Giới tính</Form.Label>\r\n                                            <div>\r\n                                                <Form.Check\r\n                                                    inline\r\n                                                    label=\"Nam\"\r\n                                                    name=\"gender\"\r\n                                                    type=\"radio\"\r\n                                                    value=\"Nam\"\r\n                                                    checked={form.gender === \"Nam\"}\r\n                                                    onChange={handleChange}\r\n                                                />\r\n                                                <Form.Check\r\n                                                    inline\r\n                                                    label=\"Nữ\"\r\n                                                    name=\"gender\"\r\n                                                    type=\"radio\"\r\n                                                    value=\"Nữ\"\r\n                                                    checked={form.gender === \"Nữ\"}\r\n                                                    onChange={handleChange}\r\n                                                />\r\n                                                <Form.Check\r\n                                                    inline\r\n                                                    label=\"Khác\"\r\n                                                    name=\"gender\"\r\n                                                    type=\"radio\"\r\n                                                    value=\"Khác\"\r\n                                                    checked={form.gender === \"Khác\"}\r\n                                                    onChange={handleChange}\r\n                                                />\r\n                                            </div>\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                </Row>\r\n\r\n                                <Form.Group className=\"my-3\">\r\n                                    <Form.Check\r\n                                        type=\"checkbox\"\r\n                                        label={<>Tôi đã đọc và đồng ý với <a href=\"#\">Điều khoản và Điều kiện</a> của sự kiện.</>}\r\n                                        checked={terms}\r\n                                        onChange={e => setTerms(e.target.checked)}\r\n                                    />\r\n                                </Form.Group>\r\n                                <div className=\"d-flex justify-content-end\">\r\n                                    {isRegistered ? (\r\n                                        <Button variant=\"danger\" size=\"lg\" onClick={handleCancel}>\r\n                                            Hủy đăng ký\r\n                                        </Button>\r\n                                    ) : (\r\n                                        <Button type=\"submit\" variant=\"primary\" size=\"lg\">\r\n                                            Xác nhận đăng ký\r\n                                        </Button>\r\n                                    )}\r\n                                </div>\r\n                            </Form>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}